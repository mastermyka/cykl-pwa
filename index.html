<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Twój Cykl – Wellness & Cytat Dnia</title>
<style>
body { font-family: Arial, sans-serif; margin:0; background:#fafafa; color:#333; }
header { background: #ff6f61; color:white; padding:1.5rem; text-align:center; }
.container { padding:1rem; max-width:700px; margin:auto; }
.card { background:white; border-radius:12px; box-shadow:0 2px 8px rgba(0,0,0,0.1); padding:1rem; margin-bottom:1rem; }
.daily { background: linear-gradient(135deg,#ff9a9e,#fad0c4); color:white; text-align:center; padding:2rem; border-radius:12px; font-size:1.1rem; }
.daily p { margin:0.5rem 0; }
.daily .quote { font-style:italic; font-size:1.25rem; }
.daily .tip { font-weight:bold; font-size:1.1rem; }
.phase { padding:1rem; border-radius:10px; color:white; text-align:center; font-weight:bold; margin-bottom:1rem; }
.menstruacja { background:#ff4d6d; }
.folikularna { background:#6fcf97; }
.owulacja { background:#56ccf2; }
.lutealna { background:#bb6bd9; }
label { display:block; margin-top:0.5rem; font-weight:bold; }
input { width:100%; padding:0.5rem; border-radius:8px; border:1px solid #ccc; }
button { width:100%; padding:0.7rem; background:#ff6f61; color:white; border:none; border-radius:8px; font-weight:bold; margin-top:1rem; cursor:pointer; }
button:hover { opacity:0.9; }
.calendar { display:grid; grid-template-columns: repeat(7, 1fr); gap:4px; }
.day { padding:8px; border-radius:6px; text-align:center; font-size:0.9rem; cursor:pointer; color:white; }
.menstruacja-day { background:#ff4d6d; }
.folikularna-day { background:#6fcf97; }
.owulacja-day { background:#56ccf2; }
.lutealna-day { background:#bb6bd9; }
</style>
</head>
<body>

<header><h1>Twój Cykl – Wellness & Cytat Dnia</h1></header>
<div class="container">

<!-- Cytat + Porada + Tip -->
<div class="card daily">
  <p class="quote" id="dailyQuote"></p>
  <p class="tip" id="dailyTip"></p>
</div>

<!-- Personalizacja -->
<div class="card">
  <h2>Ustawienia cyklu</h2>
  <label>Długość cyklu (dni):</label>
  <input type="number" id="cycleLength" value="28" min="21" max="40">
  <label>Długość krwawienia (dni):</label>
  <input type="number" id="bleedLength" value="5" min="1" max="10">
  <button onclick="updateSettings()">Zapisz ustawienia</button>
</div>

<!-- Aktualna faza -->
<div class="card">
  <h2>Aktualna faza cyklu</h2>
  <div id="currentPhase" class="phase"></div>
  <p><strong>Dzień cyklu:</strong> <span id="cycleDay"></span></p>
  <p><strong>Owulacja:</strong> <span id="ovulationDate"></span></p>
  <p><strong>Dni płodne:</strong> <span id="fertileDays"></span></p>
</div>

<!-- Kalendarz -->
<div class="card">
  <h2>Kalendarz cyklu</h2>
  <div id="calendar" class="calendar"></div>
</div>

</div>

<script>
// ======== Dane cykli (ostatnie 12) ========
const periods = [
  {start:'2025-01-07',end:'2025-01-11'},
  {start:'2025-02-02',end:'2025-02-06'},
  {start:'2025-03-01',end:'2025-03-05'},
  {start:'2025-03-28',end:'2025-04-01'},
  {start:'2025-04-24',end:'2025-04-28'},
  {start:'2025-05-20',end:'2025-05-24'},
  {start:'2025-06-15',end:'2025-06-19'},
  {start:'2025-07-11',end:'2025-07-15'},
  {start:'2025-08-06',end:'2025-08-10'},
  {start:'2025-09-01',end:'2025-09-05'},
  {start:'2025-09-27',end:'2025-10-01'},
  {start:'2025-10-23',end:'2025-10-27'}
];

// ======== Bazy cytatów (100 dla każdej fazy) ========
const quotes = {
  menstruacja: Array.from({length:100},(_,i)=>`Cytat menstruacja #${i+1} – pamiętaj o odpoczynku.`),
  folikularna: Array.from({length:100},(_,i)=>`Cytat folikularna #${i+1} – energia Ci sprzyja.`),
  owulacja: Array.from({length:100},(_,i)=>`Cytat owulacja #${i+1} – świeć pełnym blaskiem.`),
  lutealna: Array.from({length:100},(_,i)=>`Cytat lutealna #${i+1} – dbaj o równowagę.`)
};

// ======== Bazy tipów wellness (100 dla każdej fazy) ========
const wellnessTips = {
  menstruacja: Array.from({length:100},(_,i)=>`Tip menstruacja #${i+1} – delikatny spacer lub kąpiel rozluźniająca.`),
  folikularna: Array.from({length:100},(_,i)=>`Tip folikularna #${i+1} – czas na nowy trening lub inspirację.`),
  owulacja: Array.from({length:100},(_,i)=>`Tip owulacja #${i+1} – śmiało planuj nowe cele.`),
  lutealna: Array.from({length:100},(_,i)=>`Tip lutealna #${i+1} – chwila dla siebie, medytacja lub sen.`)
};

// ======== Ustawienia domyślne ========
let settings = {
  cycleLength: parseInt(document.getElementById('cycleLength').value),
  bleedLength: parseInt(document.getElementById('bleedLength').value)
};

function parseDate(str){return new Date(str+'T00:00:00');}
function formatDate(d){return d.toISOString().split('T')[0];}

// średnia długość cyklu
function avgCycle(periods){
  let sum=0;
  for(let i=1;i<periods.length;i++){
    sum += (parseDate(periods[i].start)-parseDate(periods[i-1].start))/86400000;
  }
  return Math.round(sum/(periods.length-1));
}

// Oblicz fazy
function getCycleData(){
  const cycleLen = settings.cycleLength;
  const bleedLen = settings.bleedLength;
  const lastStart = parseDate(periods[periods.length-1].start);
  const today = new Date();
  const diff = Math.floor((today-lastStart)/86400000)+1;
  const dayOfCycle = ((diff-1)%cycleLen)+1;

  const ovulationDay = Math.max(1,Math.round(cycleLen*0.5)); // ok. 50%
  const fertileStart = ovulationDay-4;
  const fertileEnd = ovulationDay;

  let phase, cls;
  if(dayOfCycle<=bleedLen){ phase='menstruacja'; cls='menstruacja';}
  else if(dayOfCycle<=ovulationDay-2){ phase='folikularna'; cls='folikularna';}
  else if(dayOfCycle<=ovulationDay){ phase='owulacja'; cls='owulacja';}
  else{ phase='lutealna'; cls='lutealna';}

  const quote = quotes[phase][Math.floor(Math.random()*quotes[phase].length)];
  const tip = wellnessTips[phase][Math.floor(Math.random()*wellnessTips[phase].length)];

  return {
    phase, cls, dayOfCycle,
    fertile:`${Math.max(1,fertileStart)} – ${fertileEnd}`,
    ovulation:ovulationDay,
    quote, tip
  };
}

// aktualizacja UI
function refreshUI(){
  const data = getCycleData();
  document.getElementById('currentPhase').textContent = data.phase.toUpperCase();
  document.getElementById('currentPhase').className = `phase ${data.cls}`;
  document.getElementById('cycleDay').textContent = data.dayOfCycle;
  document.getElementById('ovulationDate').textContent = data.ovulation;
  document.getElementById('fertileDays').textContent = data.fertile;
  document.getElementById('dailyQuote').textContent = data.quote;
  document.getElementById('dailyTip').textContent = data.tip;
  drawCalendar();
}

function updateSettings(){
  settings.cycleLength = parseInt(document.getElementById('cycleLength').value);
  settings.bleedLength = parseInt(document.getElementById('bleedLength').value);
  refreshUI();
}

// rysuje kalendarz
function drawCalendar(){
  const calendar = document.getElementById('calendar');
  calendar.innerHTML='';
  const cycleLen = settings.cycleLength;
  const bleedLen = settings.bleedLength;
  const lastStart = parseDate(periods[periods.length-1].start);

  for(let i=0;i<cycleLen;i++){
    const d = new Date(lastStart);
    d.setDate(d.getDate()+i);
    let cls='';

    if(i<bleedLen) cls='menstruacja-day';
    else if(i<cycleLen*0.5 - 2) cls='folikularna-day';
    else if(i<=cycleLen*0.5) cls='owulacja-day';
    else cls='lutealna-day';

    calendar.innerHTML += `<div class="day ${cls}">${d.getDate()}</div>`;
  }
}

refreshUI();
</script>

</body>
</html>
