<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Cykl Kobiecy - PWA</title>
<style>
  body { font-family: Arial, sans-serif; margin:0; padding:0; background:#fff; color:#333;}
  header { background:#ff8da1; color:#fff; padding:15px; text-align:center; font-size:1.5em;}
  #quote, #wellness { margin:15px; font-size:1.2em; text-align:center;}
  #calendar { display:grid; grid-template-columns:repeat(7, 1fr); gap:2px; margin:15px;}
  .day { border:1px solid #ccc; padding:10px; text-align:center; cursor:pointer; user-select:none; }
  .menstruation { background:#ffb3b3; }
  .follicular { background:#ffd9b3; }
  .ovulation { background:#b3ffc6; }
  .luteal { background:#b3d9ff; }
  /* Popup */
  #popup { position:fixed; top:0; left:0; width:100%; height:100%; display:none; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; }
  #popupContent { background:#fff; padding:20px; border-radius:10px; width:90%; max-width:400px; }
  #popupContent h3 { margin-top:0; }
  #popupContent label { display:block; margin-top:10px; }
  #popupContent textarea { width:100%; height:60px; }
  #popupContent select { width:100%; padding:5px; }
  #popupContent button { margin-top:10px; padding:10px; width:48%; }
</style>
</head>
<body>

<header>TwÃ³j Cykl Kobiecy</header>

<div id="quote"></div>
<div id="wellness"></div>

<div id="calendar"></div>

<!-- Popup -->
<div id="popup">
  <div id="popupContent">
    <h3>DzieÅ„ <span id="popupDate"></span></h3>
    <div>Faza: <span id="popupPhase"></span></div>
    <label>Objawy / Samopoczucie:</label>
    <textarea id="popupNotes"></textarea>
    <label>AktywnoÅ›Ä‡ fizyczna:</label>
    <select id="popupActivity">
      <option value="">Brak</option>
      <option value="spacer">Spacer</option>
      <option value="joga">Joga / RozciÄ…ganie</option>
      <option value="trening">Trening</option>
      <option value="odpoczynek">Odpoczynek</option>
    </select>
    <div style="display:flex; justify-content:space-between;">
      <button id="saveBtn">Zapisz</button>
      <button id="closeBtn">Zamknij</button>
    </div>
  </div>
</div>

<script>
// --------------------------
// Etap 2: Cytaty i wellness
// --------------------------
const quotes = [
"KaÅ¼dy dzieÅ„ to nowy poczÄ…tek.",
"Zaufaj swojemu ciaÅ‚u â€“ ono wie, czego potrzebuje.",
"JesteÅ› silniejsza, niÅ¼ myÅ›lisz.",
"Nie musisz byÄ‡ doskonaÅ‚a, Å¼eby byÄ‡ wystarczajÄ…ca.",
"Twoje emocje sÄ… waÅ¼ne â€“ sÅ‚uchaj ich.",
"RÃ³wnowaga to klucz do spokoju.",
"PielÄ™gnuj siebie tak, jak pielÄ™gnujesz innych.",
"Zmiana zaczyna siÄ™ od oddechu.",
"ZasÅ‚ugujesz na odpoczynek.",
"Twoje ciaÅ‚o nie jest Twoim wrogiem â€“ to TwÃ³j dom.",
"KaÅ¼dy cykl przynosi nowÄ… energiÄ™.",
"Czasem siÅ‚a to po prostu przetrwaÄ‡ dzieÅ„.",
"Zatrzymaj siÄ™. Oddychaj. Wszystko jest dobrze.",
"Masz prawo do spokoju i ciszy.",
"MiÅ‚oÅ›Ä‡ do siebie to nie egoizm, to odwaga.",
"Twoje ciaÅ‚o jest mÄ…dre â€“ zaufaj mu.",
"Nie porÃ³wnuj swojego rytmu do innych.",
"To, co czujesz, jest waÅ¼ne.",
"Zadbaj o siebie tak, jak o ukochanÄ… osobÄ™.",
"JesteÅ› czÄ™Å›ciÄ… natury â€“ i tak jak ona, masz swoje pory roku.",
"Hormony to nie przeszkoda â€“ to TwÃ³j rytm.",
"Jutro teÅ¼ jest dzieÅ„.",
"Nie bÃ³j siÄ™ zwolniÄ‡ tempa.",
"Twoja siÅ‚a tkwi w Å‚agodnoÅ›ci.",
"KaÅ¼dy etap cyklu to dar, nie wyzwanie.",
"Poczuj wdziÄ™cznoÅ›Ä‡ za to, Å¼e jesteÅ›.",
"Twoje ciaÅ‚o nie musi byÄ‡ produktywne, Å¼eby byÄ‡ piÄ™kne.",
"ZmiennoÅ›Ä‡ to czÄ™Å›Ä‡ kobiecej natury.",
"DziÅ› wybieram spokÃ³j.",
"Nie wszystko musisz mieÄ‡ pod kontrolÄ….",
"PozwÃ³l sobie na odpoczynek â€“ to teÅ¼ dziaÅ‚anie.",
"Twoja wartoÅ›Ä‡ nie zaleÅ¼y od energii, ktÃ³rÄ… dziÅ› masz.",
"Zaufaj procesowi.",
"RÃ³wnowaga to sztuka codziennych maÅ‚ych decyzji.",
"Czasem cisza mÃ³wi wiÄ™cej niÅ¼ tysiÄ…c sÅ‚Ã³w.",
"W Twojej delikatnoÅ›ci jest ogromna siÅ‚a.",
"Nie musisz nic udowadniaÄ‡.",
"KaÅ¼dy dzieÅ„ przynosi nowÄ… szansÄ™ na spokÃ³j.",
"BÄ…dÅº dla siebie dobra.",
"Masz prawo byÄ‡ zmÄ™czona â€“ to czÄ™Å›Ä‡ bycia czÅ‚owiekiem.",
"UwaÅ¼noÅ›Ä‡ zmienia sposÃ³b, w jaki odbierasz Å›wiat.",
"KaÅ¼dy oddech to szansa na reset.",
"Daj sobie prawo do maÅ‚ych przyjemnoÅ›ci.",
"Twoja energia ma swoje naturalne wzloty i spadki.",
"Åšmiech to lekarstwo dla duszy.",
"Nie oceniaj siebie zbyt surowo.",
"OdpuÅ›Ä‡ to, czego nie moÅ¼esz zmieniÄ‡.",
"Codzienny rytuaÅ‚ moÅ¼e daÄ‡ spokÃ³j.",
"Twoje potrzeby sÄ… waÅ¼ne.",
"ZrÃ³b coÅ› miÅ‚ego dla swojego ciaÅ‚a.",
"Obserwuj zmiany w sobie z ciekawoÅ›ciÄ….",
"KaÅ¼dy dzieÅ„ to nowa lekcja.",
"CiaÅ‚o i umysÅ‚ potrzebujÄ… rÃ³wnowagi.",
"Nie bÃ³j siÄ™ sÅ‚uchaÄ‡ intuicji.",
"Akceptacja siebie to pierwszy krok do szczÄ™Å›cia.",
"Twoja obecnoÅ›Ä‡ jest wystarczajÄ…ca.",
"ZasÅ‚ugujesz na troskÄ™ i uwagÄ™.",
"Nie spiesz siÄ™, Å¼ycie nie ucieka.",
"KaÅ¼da emocja jest dopuszczalna.",
"Nie musisz zawsze byÄ‡ w peÅ‚ni gotowa.",
"TwÃ³j rytm jest unikalny.",
"Codziennie ucz siÄ™ czegoÅ› o sobie.",
"Twoja siÅ‚a tkwi w autentycznoÅ›ci.",
"PozwÃ³l sobie na chwilÄ™ oddechu.",
"Cisza daje odpowiedzi, ktÃ³rych nie daje haÅ‚as.",
"Nie musisz mieÄ‡ planu na wszystko.",
"Doceniaj maÅ‚e kroki.",
"ZrÃ³b dziÅ› coÅ›, co sprawia Ci radoÅ›Ä‡.",
"Twoja intuicja prowadzi CiÄ™ najlepiej.",
"Nie oceniaj swojego dnia zbyt surowo.",
"KaÅ¼dy etap Å¼ycia ma swoje znaczenie.",
"Twoje ciaÅ‚o zasÅ‚uguje na troskÄ™.",
"Nie porÃ³wnuj siÄ™ do innych kobiet.",
"TwÃ³j czas jest cenny â€“ dbaj o niego.",
"Nie musisz byÄ‡ produktywna caÅ‚y czas.",
"MaÅ‚e zwyciÄ™stwa teÅ¼ sÄ… waÅ¼ne.",
"Twoje granice sÄ… waÅ¼ne.",
"Nie bÃ³j siÄ™ prosiÄ‡ o pomoc.",
"Åšwiadome oddechy uspokajajÄ… umysÅ‚.",
"Zadbaj o swoje emocje tak samo jak o ciaÅ‚o.",
"Twoje potrzeby sÄ… waÅ¼niejsze niÅ¼ opinie innych.",
"Nie spiesz siÄ™, kaÅ¼dy rytm ma sens.",
"CiaÅ‚o i umysÅ‚ potrzebujÄ… odpoczynku.",
"Akceptacja siebie to najlepszy prezent.",
"PozwÃ³l sobie na maÅ‚e przyjemnoÅ›ci.",
"KaÅ¼dy dzieÅ„ to szansa na spokÃ³j.",
"Twoja siÅ‚a tkwi w cierpliwoÅ›ci.",
"Nie musisz byÄ‡ idealna, Å¼eby byÄ‡ szczÄ™Å›liwa.",
"ZasÅ‚ugujesz na troskÄ™ i miÅ‚oÅ›Ä‡.",
"Twoja energia ma swoje naturalne granice.",
"UwaÅ¼noÅ›Ä‡ pozwala lepiej czuÄ‡ ciaÅ‚o.",
"KaÅ¼da emocja ma prawo siÄ™ pojawiÄ‡.",
"Nie oceniaj swojego rytmu za surowo.",
"Twoja obecnoÅ›Ä‡ jest wystarczajÄ…ca.",
"Zaufaj procesowi swojego ciaÅ‚a.",
"RÃ³wnowaga to codzienna praktyka.",
"TwÃ³j spokÃ³j ma znaczenie.",
"ZrÃ³b dziÅ› coÅ›, co daje Ci radoÅ›Ä‡.",
"CiaÅ‚o wie lepiej niÅ¼ myÅ›lisz.",
"Nie musisz kontrolowaÄ‡ wszystkiego.",
"Akceptacja siebie daje wolnoÅ›Ä‡.",
"Twoja siÅ‚a tkwi w delikatnoÅ›ci.",
"PozwÃ³l sobie na odpoczynek dzisiaj.",
"Codziennie ucz siÄ™ czegoÅ› o sobie.",
"Twoje emocje sÄ… naturalne i waÅ¼ne.",
"Nie porÃ³wnuj swojego rytmu z innymi.",
"Åšwiadome chwile dajÄ… energiÄ™.",
"MaÅ‚e kroki prowadzÄ… do wielkich zmian.",
"Twoja obecnoÅ›Ä‡ jest TwojÄ… mocÄ….",
"Nie oceniaj siÄ™ za surowo â€“ jesteÅ› wystarczajÄ…ca.",
"ZasÅ‚ugujesz na spokÃ³j i troskÄ™."
];

const wellnessTips = [
"Wypij szklankÄ™ wody po przebudzeniu ðŸ’§",
"ZrÃ³b 5 gÅ‚Ä™bokich oddechÃ³w ðŸŒ¿",
"RozciÄ…gnij ramiona i plecy ðŸ§˜â€â™€ï¸",
"PoÅ›wiÄ™Ä‡ 10 minut na relaks ðŸ’•",
"Zjedz coÅ› zielonego ðŸ¥—",
"ZrÃ³b krÃ³tki spacer na Å›wieÅ¼ym powietrzu ðŸš¶â€â™€ï¸",
"PosÅ‚uchaj ulubionej muzyki ðŸŽ¶",
"ZrÃ³b herbatÄ™ i chwilÄ™ odpocznij â˜•",
"Zapisz 3 rzeczy, za ktÃ³re jesteÅ› wdziÄ™czna âœï¸",
"ZrÃ³b mini-meditacjÄ™ 5 minut ðŸª·",
"OdÅ‚Ã³Å¼ telefon na godzinÄ™ ðŸ“µ",
"ZrÃ³b coÅ› kreatywnego ðŸŽ¨",
"PoÄ‡wicz uwaÅ¼noÅ›Ä‡ przy jednej czynnoÅ›ci ðŸ§˜",
"Zadbaj o nawodnienie ðŸ’¦",
"Zjedz poÅ¼ywne Å›niadanie ðŸ²",
"UÅ›miechnij siÄ™ do siebie w lustrze ðŸ™‚",
"Wieczorem weÅº ciepÅ‚Ä… kÄ…piel ðŸ›",
"WyjdÅº na balkon i oddychaj gÅ‚Ä™boko ðŸŒ¤ï¸",
"RozluÅºnij ramiona i kark ðŸ’†â€â™€ï¸",
"Napisz komuÅ› miÅ‚Ä… wiadomoÅ›Ä‡ ðŸ’Œ",
"Nie oceniaj siebie zbyt surowo ðŸ’«",
"OdpuÅ›Ä‡ to, czego nie moÅ¼esz zmieniÄ‡ ðŸŒ¸",
"StwÃ³rz sobie maÅ‚y rytuaÅ‚ spokoju ðŸ•¯ï¸",
"Zadbaj o swoje potrzeby ðŸ§¡",
"Obserwuj swoje ciaÅ‚o z ciekawoÅ›ciÄ… ðŸ‘€",
"Codziennie ucz siÄ™ czegoÅ› nowego o sobie ðŸ“–",
"PoÅ›wiÄ™Ä‡ 5 minut na Å›wiadome oddychanie ðŸŒ¬ï¸",
"Zjedz owoce zamiast sÅ‚odyczy ðŸŽ",
"IdÅº na krÃ³tki spacer w przerwie od pracy ðŸš¶â€â™€ï¸",
"ZrÃ³b notatkÄ™ o pozytywnych wydarzeniach dnia ðŸ““",
"ZrÃ³b 10 pompek lub kilka przysiadÃ³w ðŸ’ª",
"Zrelaksuj oczy â€“ patrz w dal przez minutÄ™ ðŸ‘ï¸",
"ZrÃ³b dziennik wdziÄ™cznoÅ›ci ðŸ“",
"ZrÃ³b przerwÄ™ od ekranu â€“ oczy odpocznÄ… ðŸ‘€",
"Zaplanuj maÅ‚Ä… przyjemnoÅ›Ä‡ na wieczÃ³r ðŸŒ™",
"Oddychaj Å›wiadomie podczas codziennych czynnoÅ›ci ðŸ§˜â€â™€ï¸",
"ZrÃ³b krÃ³tki stretching przed snem ðŸŒ›",
"Wypij ciepÅ‚Ä… herbatÄ™ zioÅ‚owÄ… ðŸŒ¿",
"ZrÃ³b maÅ‚Ä… medytacjÄ™ wdziÄ™cznoÅ›ci ðŸ™",
"RozciÄ…gnij szyjÄ™ i barki ðŸ’†â€â™€ï¸",
"Zjedz zdrowÄ… przekÄ…skÄ™ miÄ™dzy posiÅ‚kami ðŸ¥œ",
"PoÅ›wiÄ™Ä‡ chwilÄ™ na ulubionÄ… aktywnoÅ›Ä‡ fizycznÄ… ðŸƒâ€â™€ï¸",
"PosÅ‚uchaj relaksujÄ…cej muzyki ðŸŽµ",
"ZrÃ³b sobie maseczkÄ™ lub peeling twarzy ðŸ§–â€â™€ï¸",
"UÅ‚Ã³Å¼ porzÄ…dek na biurku lub w pokoju ðŸ§¹",
"PoÅ›wiÄ™Ä‡ czas na kreatywne pisanie âœï¸",
"Zjedz coÅ› bogatego w witaminy ðŸŠ",
"Przypomnij sobie trzy pozytywne rzeczy z dnia ðŸŒ¸",
"WyjdÅº na balkon i poczuj powietrze ðŸŒ¬ï¸",
"ZrÃ³b krÃ³tkÄ… wizualizacjÄ™ spokoju ðŸ§˜",
"Przeznacz 10 minut na Å›wiadome rozciÄ…ganie ðŸŒ¿",
"ZrÃ³b krÃ³tki spacer po schodach ðŸƒâ€â™€ï¸",
"Zapisz swÃ³j nastrÃ³j w dzienniku ðŸŒ¸",
"Zjedz lekki posiÅ‚ek przed snem ðŸµ",
"ZrÃ³b kilka gÅ‚Ä™bokich oddechÃ³w przed rozpoczÄ™ciem pracy ðŸŒ¬ï¸",
"PoÅ›wiÄ™Ä‡ chwilÄ™ na wyciszenie umysÅ‚u ðŸ§˜â€â™€ï¸",
"ZrÃ³b prosty trening rozciÄ…gajÄ…cy ðŸ§Žâ€â™€ï¸",
"Wypij szklankÄ™ wody z cytrynÄ… ðŸ‹",
"ZrÃ³b kilka przysiadÃ³w lub pajacykÃ³w ðŸ‹ï¸â€â™€ï¸",
"PoÅ›wiÄ™Ä‡ czas na spokojnÄ… lekturÄ™ ðŸ“–",
"ZrÃ³b krÃ³tkÄ… medytacjÄ™ oddechowÄ… ðŸŒ¿",
"Zrelaksuj miÄ™Å›nie karku i ramion ðŸ’†",
"ZrÃ³b krÃ³tki spacer w ciÄ…gu dnia ðŸš¶â€â™€ï¸",
"Zjedz Å›wieÅ¼e owoce ðŸ“",
"PoÅ›wiÄ™Ä‡ chwilÄ™ na uwaÅ¼ne jedzenie ðŸ¥—",
"Zapisz swoje myÅ›li w dzienniku âœï¸",
"RozciÄ…gnij plecy i biodra ðŸ§˜",
"ZrÃ³b maÅ‚Ä… przerwÄ™ od pracy przy komputerze ðŸ’»",
"PoÅ›wiÄ™Ä‡ chwilÄ™ na Å›wiadomy oddech ðŸŒ¬ï¸",
"Zjedz zdrowÄ… przekÄ…skÄ™ z orzechami ðŸ¥œ",
"ZrÃ³b krÃ³tkÄ… medytacjÄ™ relaksacyjnÄ… ðŸŒ¿",
"PoÅ›wiÄ™Ä‡ czas na sÅ‚uchanie ulubionej muzyki ðŸŽµ",
"Zrelaksuj miÄ™Å›nie nÃ³g i stÃ³p ðŸ¦¶",
"ZrÃ³b kilka pompek lub plank ðŸ‹ï¸â€â™€ï¸",
"Zjedz lekki posiÅ‚ek bogaty w biaÅ‚ko ðŸ³",
"PoÅ›wiÄ™Ä‡ 10 minut na spacer na Å›wieÅ¼ym powietrzu ðŸš¶",
"ZrÃ³b maÅ‚Ä… wizualizacjÄ™ swojego spokoju ðŸ§˜â€â™€ï¸",
"Wypij ciepÅ‚Ä… herbatÄ™ zioÅ‚owÄ… przed snem ðŸµ",
"RozciÄ…gnij rÄ™ce, barki i szyjÄ™ ðŸ’†â€â™€ï¸",
"PoÅ›wiÄ™Ä‡ chwilÄ™ na medytacjÄ™ wdziÄ™cznoÅ›ci ðŸ™",
"ZrÃ³b krÃ³tkÄ… seriÄ™ przysiadÃ³w lub rozgrzewki ðŸ‹ï¸",
"Zjedz coÅ› Å›wieÅ¼ego i peÅ‚nowartoÅ›ciowego ðŸ¥—",
"PoÅ›wiÄ™Ä‡ chwilÄ™ na Å›wiadomy oddech ðŸŒ¬ï¸",
"Zapisz swoje emocje w dzienniku âœï¸",
"RozciÄ…gnij nogi i plecy przed snem ðŸ§˜â€â™€ï¸",
"ZrÃ³b krÃ³tki spacer dla relaksu ðŸš¶",
"PoÅ›wiÄ™Ä‡ chwilÄ™ na sÅ‚uchanie przyjemnych dÅºwiÄ™kÃ³w ðŸŽµ",
"ZrÃ³b maÅ‚Ä… aktywnoÅ›Ä‡ fizycznÄ… w ciÄ…gu dnia ðŸƒâ€â™€ï¸",
"Zjedz coÅ› bogatego w witaminy i mineraÅ‚y ðŸŠ",
"PoÅ›wiÄ™Ä‡ czas na swoje hobby lub pasjÄ™ ðŸŽ¨",
"Zrelaksuj oczy i odwrÃ³Ä‡ wzrok od ekranu ðŸ‘€",
"ZrÃ³b 5 minutowy mini-meditation ðŸŒ¿",
"PoÅ›wiÄ™Ä‡ chwilÄ™ na uwaÅ¼ne mycie rÄ…k lub picie wody ðŸ’§",
"ZrÃ³b krÃ³tkÄ… wizualizacjÄ™ swojego dnia ðŸŒ¸",
"RozciÄ…gnij rÄ™ce i barki w ciÄ…gu dnia ðŸ’†â€â™€ï¸",
"PoÅ›wiÄ™Ä‡ czas na sÅ‚uchanie muzyki, ktÃ³ra uspokaja ðŸŽ¶",
"ZrÃ³b krÃ³tkÄ… przerwÄ™ na oddech w pracy ðŸŒ¬ï¸",
"Zjedz lekkÄ… przekÄ…skÄ™ bogatÄ… w biaÅ‚ko ðŸ¥š",
"ZrÃ³b kilka prostych Ä‡wiczeÅ„ rozciÄ…gajÄ…cych ðŸ§˜â€â™€ï¸",
"PoÅ›wiÄ™Ä‡ chwilÄ™ na Å›wiadome picie wody ðŸ’§",
"Zapisz 3 pozytywne myÅ›li z dnia âœï¸",
"RozciÄ…gnij plecy i kark przed snem ðŸ›Œ",
"ZrÃ³b krÃ³tki spacer na Å›wieÅ¼ym powietrzu ðŸš¶â€â™€ï¸",
"PoÅ›wiÄ™Ä‡ chwilÄ™ na uwaÅ¼ne jedzenie ðŸ¥—",
"ZrÃ³b kilka gÅ‚Ä™bokich oddechÃ³w i wycisz umysÅ‚ ðŸŒ¿",
"Zrelaksuj stopy i nogi po caÅ‚ym dniu ðŸ‘£",
"PoÅ›wiÄ™Ä‡ chwilÄ™ na krÃ³tkÄ… medytacjÄ™ relaksacyjnÄ… ðŸ§˜",
"Zjedz coÅ› Å›wieÅ¼ego i zdrowego ðŸŽ",
"ZrÃ³b krÃ³tki trening rozciÄ…gajÄ…cy przed snem ðŸ‹ï¸â€â™€ï¸"
];


function showDailyQuote() {
  const d = new Date().toDateString();
  let stored = JSON.parse(localStorage.getItem('quoteDay') || '{}');
  if(stored.date !== d) {
    stored = { date:d, text:quotes[Math.floor(Math.random()*quotes.length)] };
    localStorage.setItem('quoteDay', JSON.stringify(stored));
  }
  document.getElementById('quote').textContent = stored.text;
}

function showDailyWellness() {
  const d = new Date().toDateString();
  let stored = JSON.parse(localStorage.getItem('wellnessDay') || '{}');
  if(stored.date !== d) {
    stored = { date:d, text:wellnessTips[Math.floor(Math.random()*wellnessTips.length)] };
    localStorage.setItem('wellnessDay', JSON.stringify(stored));
  }
  document.getElementById('wellness').textContent = stored.text;
}

showDailyQuote();
showDailyWellness();

// --------------------------
// Etap 3: Interaktywny kalendarz
// --------------------------
const calendarDiv = document.getElementById('calendar');

const cycleData = [
  // Wstaw swoje dane z poczÄ…tkami i koÅ„cami miesiÄ…czek
  {start:"2025-01-07", end:"2025-01-10"},
  {start:"2025-01-30", end:"2025-02-02"},
  {start:"2025-02-24", end:"2025-02-27"},
  {start:"2025-03-23", end:"2025-03-26"},
  {start:"2025-04-16", end:"2025-04-19"},
  {start:"2025-05-12", end:"2025-05-15"},
  {start:"2025-06-04", end:"2025-06-07"},
  {start:"2025-06-28", end:"2025-07-01"},
  {start:"2025-07-24", end:"2025-07-27"},
  {start:"2025-08-18", end:"2025-08-21"},
  {start:"2025-09-12", end:"2025-09-15"},
  {start:"2025-10-08", end:"2025-10-11"},
  {start:"2025-10-30", end:"2025-11-02"},
  {start:"2025-11-25", end:"2025-11-28"},
  {start:"2025-12-19", end:"2025-12-22"},
];

// Funkcja do okreÅ›lania fazy dnia
function getPhase(date) {
  const d = new Date(date);
  // Dni menstruacji
  for(const c of cycleData){
    const start = new Date(c.start);
    const end = new Date(c.end);
    if(d>=start && d<=end) return {phase:"menstruation", label:"Menstruacja"};
  }
  // PrzybliÅ¼one fazy (dla przykÅ‚adu, 14 dni cyklu)
  const lastStart = new Date(cycleData[cycleData.length-1].start);
  const diff = Math.floor((d-lastStart)/86400000) % 28;
  if(diff>=0 && diff<6) return {phase:"follicular", label:"Faza folikularna"};
  if(diff>=6 && diff<14) return {phase:"ovulation", label:"Owulacja"};
  return {phase:"luteal", label:"Faza lutealna"};
}

// Tworzenie kalendarza (np. miesiÄ…c bieÅ¼Ä…cy)
function updateCalendar() {
  calendarDiv.innerHTML="";
  const today = new Date();
  const year = today.getFullYear();
  const month = today.getMonth();
  const firstDay = new Date(year, month,1);
  const lastDay = new Date(year, month+1,0);
  for(let i=1;i<=lastDay.getDate();i++){
    const dayDate = new Date(year,month,i);
    const phaseObj = getPhase(dayDate);
    const div = document.createElement('div');
    div.className = "day "+phaseObj.phase;
    div.textContent = i;
    div.dataset.date = dayDate.toISOString().split('T')[0];
    div.addEventListener('click',()=>openPopup(div.dataset.date));
    calendarDiv.appendChild(div);
  }
}

// --------------------------
// Popup
// --------------------------
const popup = document.getElementById('popup');
const popupDate = document.getElementById('popupDate');
const popupPhase = document.getElementById('popupPhase');
const popupNotes = document.getElementById('popupNotes');
const popupActivity = document.getElementById('popupActivity');
const saveBtn = document.getElementById('saveBtn');
const closeBtn = document.getElementById('closeBtn');

function openPopup(dateStr) {
  popup.style.display="flex";
  popupDate.textContent = dateStr;
  const phaseObj = getPhase(dateStr);
  popupPhase.textContent = phaseObj.label;
  const saved = JSON.parse(localStorage.getItem("day-"+dateStr)||"{}");
  popupNotes.value = saved.notes||"";
  popupActivity.value = saved.activity||"";
}

saveBtn.addEventListener('click',()=>{
  const dateStr = popupDate.textContent;
  const data = {notes: popupNotes.value, activity: popupActivity.value};
  localStorage.setItem("day-"+dateStr, JSON.stringify(data));
  popup.style.display="none";
});

closeBtn.addEventListener('click',()=>{ popup.style.display="none"; });

updateCalendar();
</script>
</body>
</html>
